
#INCLUDE(QtLinkMacro)
#INCLUDE(RegPackageMacro)

#SET(BUILD_BIN_TYPE_DIR ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CONFIGURATION_TYPES})
#SET(BUILD_INCLUDE_DIR ${BUILD_DIR}/include)
#SET(BUILD_INSTALL_DIR ${BUILD_DIR}/install)

#MESSAGE(STATUS "BUILD_DIR: " ${BUILD_DIR})
#MESSAGE(STATUS "BUILD_INCLUDE_DIR: " ${BUILD_INCLUDE_DIR})
#MESSAGE(STATUS "BUILD_INSTALL_DIR: " ${BUILD_INSTALL_DIR})

FIND_PACKAGE(Qt5 COMPONENTS Core Widgets Gui REQUIRED)
ADD_SUBDIRECTORY(MyLib)

ADD_LIBRARY(${CMAKE_PROJECT_NAME} SHARED
	${library_hdr}
	${library_src}
	${library_res}
)

ADD_CUSTOM_COMMAND(TARGET ${CMAKE_PROJECT_NAME}
	POST_BUILD
	COMMAND ${CMAKE_COMMAND} -E make_directory ${BUILD_DIR}/include
    COMMAND ${CMAKE_COMMAND} -E copy_if_different ${library_hdr} ${BUILD_DIR}/include
)

TARGET_INCLUDE_DIRECTORIES(${CMAKE_PROJECT_NAME} PUBLIC ${BUILD_DIR}/include)
TARGET_LINK_LIBRARIES(${CMAKE_PROJECT_NAME} PUBLIC 
	$<TARGET_LINKER_FILE:Qt5::Core> 
	$<TARGET_LINKER_FILE:Qt5::Gui>
	$<TARGET_LINKER_FILE:Qt5::Widgets>
)

#QtLink(${CMAKE_PROJECT_NAME} Core Widgets Gui)

#ADD_CUSTOM_COMMAND(TARGET ${CMAKE_PROJECT_NAME}
#	POST_BUILD
#    COMMAND ${CMAKE_COMMAND} -E copy_if_different
#	$<TARGET_FILE:Qt5::Core> ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CONFIGURATION_TYPES}
	#$<TARGET_FILE:Qt5::Gui> ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CONFIGURATION_TYPES}
#	$<TARGET_FILE:Qt5::Widgets> ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CONFIGURATION_TYPES}
#)

INSTALL(TARGETS ${CMAKE_PROJECT_NAME} 
	RUNTIME DESTINATION install
	#COMPONENT applications
)

# PACKAGE SETUP ###################################################

#RegPackage(${CMAKE_PROJECT_NAME} ${BUILD_DIR})
